<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Evaluación con IA – RoB 2</title>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
  max-width: 900px;
}

h1, h2, h3 {
  color: #2c3e50;
}

.domain {
  border: 1px solid #ccc;
  padding: 15px;
  margin-bottom: 20px;
  border-radius: 6px;
  background-color: #f9f9f9;
}

label {
  font-weight: bold;
}

select, textarea, button {
  width: 100%;
  margin-top: 6px;
  margin-bottom: 12px;
  padding: 8px;
  font-size: 14px;
}

button {
  background-color: #2980b9;
  color: white;
  border: none;
  cursor: pointer;
  border-radius: 4px;
}

button:hover {
  background-color: #1f6391;
}

textarea[readonly] {
  background-color: #eee;
}
</style>
</head>

<body>

<h1>Evaluación del riesgo de sesgo (RoB 2) con apoyo de IA</h1>

<p>
Complete el juicio y la evidencia textual para cada dominio.
El sistema generará un <strong>prompt transparente</strong> que podrá copiar y pegar en ChatGPT.
</p>

<!-- ===================== DOMINIOS ===================== -->

<div class="domain">
<h2>Dominio 1: Proceso de aleatorización</h2>

<label>Juicio</label>
<select id="d1-judgment">
  <option value="">Seleccione</option>
  <option>Bajo riesgo</option>
  <option>Algunas preocupaciones</option>
  <option>Alto riesgo</option>
</select>

<label>Evidencia textual (copiada del artículo)</label>
<textarea id="d1-evidence" rows="4"></textarea>

<button onclick="analyze('d1', 'Proceso de aleatorización')">
Analizar con IA
</button>
</div>

<div class="domain">
<h2>Dominio 2: Desviaciones de las intervenciones</h2>

<label>Juicio</label>
<select id="d2-judgment">
  <option value="">Seleccione</option>
  <option>Bajo riesgo</option>
  <option>Algunas preocupaciones</option>
  <option>Alto riesgo</option>
</select>

<label>Evidencia textual</label>
<textarea id="d2-evidence" rows="4"></textarea>

<button onclick="analyze('d2', 'Desviaciones de las intervenciones')">
Analizar con IA
</button>
</div>

<div class="domain">
<h2>Dominio 3: Datos de resultado faltantes</h2>

<label>Juicio</label>
<select id="d3-judgment">
  <option value="">Seleccione</option>
  <option>Bajo riesgo</option>
  <option>Algunas preocupaciones</option>
  <option>Alto riesgo</option>
</select>

<label>Evidencia textual</label>
<textarea id="d3-evidence" rows="4"></textarea>

<button onclick="analyze('d3', 'Datos de resultado faltantes')">
Analizar con IA
</button>
</div>

<div class="domain">
<h2>Dominio 4: Medición del resultado</h2>

<label>Juicio</label>
<select id="d4-judgment">
  <option value="">Seleccione</option>
  <option>Bajo riesgo</option>
  <option>Algunas preocupaciones</option>
  <option>Alto riesgo</option>
</select>

<label>Evidencia textual</label>
<textarea id="d4-evidence" rows="4"></textarea>

<button onclick="analyze('d4', 'Medición del resultado')">
Analizar con IA
</button>
</div>

<div class="domain">
<h2>Dominio 5: Selección del resultado informado</h2>

<label>Juicio</label>
<select id="d5-judgment">
  <option value="">Seleccione</option>
  <option>Bajo riesgo</option>
  <option>Algunas preocupaciones</option>
  <option>Alto riesgo</option>
</select>

<label>Evidencia textual</label>
<textarea id="d5-evidence" rows="4"></textarea>

<button onclick="analyze('d5', 'Selección del resultado informado')">
Analizar con IA
</button>
</div>

<!-- ===================== PROMPT ===================== -->

<h3>Prompt generado</h3>

<textarea id="generated-prompt" rows="12" readonly></textarea>

<button onclick="copyPrompt()">Copiar prompt</button>

<!-- ===================== SCRIPT ===================== -->

<script>
function buildPrompt(domain, judgment, evidence) {
  return `
Actúe como un evaluador metodológico experto en ensayos clínicos.

Estoy aplicando la herramienta RoB 2 de Cochrane.

Dominio evaluado:
${domain}

Juicio asignado por el evaluador:
${judgment}

Evidencia textual del artículo:
"${evidence}"

Tareas:
1. Evalúe si el juicio es coherente con la evidencia.
2. Indique si el juicio es apropiado según RoB 2.
3. Señale cualquier información faltante relevante.
4. No infiera información que no esté explícitamente en el texto.
5. Use un lenguaje claro y estructurado.

Responda en español.
`;
}

function analyze(domainId, domainName) {
  const judgment = document.getElementById(domainId + "-judgment").value;
  const evidence = document.getElementById(domainId + "-evidence").value;

  if (!judgment || !evidence.trim()) {
    alert("Debe completar el juicio y la evidencia textual.");
    return;
  }

  const prompt = buildPrompt(domainName, judgment, evidence);

  document.getElementById("generated-prompt").value = prompt;

  alert(
    "El prompt ha sido generado.\n\n" +
    "Cópielo y luego se abrirá ChatGPT para pegarlo."
  );

  window.open("https://chatgpt.com/", "_blank");
}

function copyPrompt() {
  const text = document.getElementById("generated-prompt").value;

  if (!text.trim()) {
    alert("No hay ningún prompt para copiar.");
    return;
  }

  navigator.clipboard.writeText(text).then(() => {
    alert("Prompt copiado al portapapeles.\nPéguelo en ChatGPT.");
  });
}
</script>

<p><em>
Universidad Nacional de Colombia – Evaluación metodológica con apoyo de IA  
Este asistente no reemplaza el juicio crítico del estudiante.
</em></p>

  
</body>
</html>
